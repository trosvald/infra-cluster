
<div align="center">

<img width="144px" height="144px" src="https://camo.githubusercontent.com/5b298bf6b0596795602bd771c5bddbb963e83e0f/68747470733a2f2f692e696d6775722e636f6d2f7031527a586a512e706e67"/>

## Home Kubernetes Cluster :sailboat:

... managed with Flux and Renovate :robot:

</div>

<div align="center">
<div>

[![Kubernetes](https://img.shields.io/badge/v1.28.4-blue?style=for-the-badge&logo=kubernetes&logoColor=white)](https://k8s.io/)
[![Talos](https://img.shields.io/badge/v1.5.5-blue?style=for-the-badge&logo=data:image/svg%2bxml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmlld0JveD0iMCAwIDIwMy43NCAyMjYuMDUiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDp1cmwoI2xpbmVhci1ncmFkaWVudCk7fS5jbHMtMntmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50LTIpO30uY2xzLTN7ZmlsbDp1cmwoI2xpbmVhci1ncmFkaWVudC0zKTt9LmNscy00e2ZpbGw6dXJsKCNsaW5lYXItZ3JhZGllbnQtNCk7fS5jbHMtNXtmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50LTUpO308L3N0eWxlPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iMTAxLjg1IiB5MT0iLTE1LjE5IiB4Mj0iMTAxLjg1IiB5Mj0iMjM3LjgxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZkMjAwIi8+PHN0b3Agb2Zmc2V0PSIwLjA2IiBzdG9wLWNvbG9yPSIjZmZiNTAwIi8+PHN0b3Agb2Zmc2V0PSIwLjE0IiBzdG9wLWNvbG9yPSIjZmY4YzAwIi8+PHN0b3Agb2Zmc2V0PSIwLjIxIiBzdG9wLWNvbG9yPSIjZmY3MzAwIi8+PHN0b3Agb2Zmc2V0PSIwLjI2IiBzdG9wLWNvbG9yPSIjZmY2YTAwIi8+PHN0b3Agb2Zmc2V0PSIwLjMzIiBzdG9wLWNvbG9yPSIjZmM0ZjBlIi8+PHN0b3Agb2Zmc2V0PSIwLjQzIiBzdG9wLWNvbG9yPSIjZjkyZjFlIi8+PHN0b3Agb2Zmc2V0PSIwLjUxIiBzdG9wLWNvbG9yPSIjZjgxYjI3Ii8+PHN0b3Agb2Zmc2V0PSIwLjU3IiBzdG9wLWNvbG9yPSIjZjcxNDJiIi8+PHN0b3Agb2Zmc2V0PSIwLjY4IiBzdG9wLWNvbG9yPSIjZGYxNjJlIi8+PHN0b3Agb2Zmc2V0PSIwLjc5IiBzdG9wLWNvbG9yPSIjYWYxYTM4Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNGIyMTRjIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0yIiB4MT0iMjQuODQiIHkxPSItMTUuMTkiIHgyPSIyNC44NCIgeTI9IjIzNy44MSIgeGxpbms6aHJlZj0iI2xpbmVhci1ncmFkaWVudCIvPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50LTMiIHgxPSIxNzguOSIgeTE9Ii0xNS4xOSIgeDI9IjE3OC45IiB5Mj0iMjM3LjgxIiB4bGluazpocmVmPSIjbGluZWFyLWdyYWRpZW50Ii8+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQtNCIgeDE9IjE0NS4wNiIgeTE9Ii0xNS4xOSIgeDI9IjE0NS4wNiIgeTI9IjIzNy44MSIgeGxpbms6aHJlZj0iI2xpbmVhci1ncmFkaWVudCIvPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50LTUiIHgxPSI1OC42NCIgeTE9Ii0xNS4xOSIgeDI9IjU4LjY0IiB5Mj0iMjM3LjgxIiB4bGluazpocmVmPSIjbGluZWFyLWdyYWRpZW50Ii8+PC9kZWZzPjxnIGlkPSJMYXllcl8yIiBkYXRhLW5hbWU9IkxheWVyIDIiPjxnIGlkPSJMYXllcl8xLTIiIGRhdGEtbmFtZT0iTGF5ZXIgMSI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTAxLjg5LDIyNi4wNWMyLjg1LDAsNS42Ny0uMTUsOC40Ni0uMzVWLjM1Yy0yLjgtLjIxLTUuNjItLjM1LTguNDgtLjM1cy01LjcuMTQtOC41Mi4zNVYyMjUuNjljMi44MS4yMSw1LjY0LjM1LDguNS4zNloiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0xMS41Niw1MC45LDkuMTIsNDguNDdBMTEyLjgyLDExMi44MiwwLDAsMCwuMiw2My42MWMyOS40MiwyOS44OSwzMi41Miw0NC4zMSwzMi40OCw0OS4xNEMzMi41NywxMjUsMTcuNTgsMTQ0LjIxLDAsMTYyYTExMy42OSwxMTMuNjksMCwwLDAsOC44NCwxNS4xNWMxLTEsMS45NS0xLjkyLDIuOTItMi45LDI1LjM3LTI1LjU0LDM3Ljc3LTQ1LjYxLDM3LjkyLTYxLjM4UzM3LjM2LDc3LDExLjU2LDUwLjlaIi8+PHBhdGggY2xhc3M9ImNscy0zIiBkPSJNMTkyLDE3NC4yOWwyLjkyLDIuOUExMTMuNjksMTEzLjY5LDAsMCwwLDIwMy43NCwxNjJjLTE3LjU3LTE3LjgzLTMyLjU2LTM3LjA5LTMyLjY4LTQ5LjI5LS4xMS0xMS45LDE0Ljc5LTMxLjE1LDMyLjQ2LTQ5LjE4YTExMi44OCwxMTIuODgsMCwwLDAtOC45LTE1LjFsLTIuNDQsMi40M2MtMjUuOCwyNi4wNS0zOC4yNyw0Ni4zNC0zOC4xMiw2MlMxNjYuNjEsMTQ4Ljc1LDE5MiwxNzQuMjlaIi8+PHBhdGggY2xhc3M9ImNscy00IiBkPSJNMTQwLjY4LDExMi44M2MwLTIyLDkuODEtNTguNTgsMjQuOTItOTMuMTVBMTEzLDExMywwLDAsMCwxNTAuNDUsMTFjLTE2LjU0LDM3LjI3LTI2Ljc4LDc2LjkxLTI2Ljc4LDEwMS44NywwLDI0LjE1LDExLjA5LDY0LjIzLDI3LjkzLDEwMS43YTExMywxMTMsMCwwLDAsMTQuODQtOC43N0MxNTAuODUsMTcwLjczLDE0MC42OCwxMzQuMDcsMTQwLjY4LDExMi44M1oiLz48cGF0aCBjbGFzcz0iY2xzLTUiIGQ9Ik04MCwxMTIuODNDODAsODcuNzQsNjkuMzUsNDcuODgsNTMsMTEuMDdhMTEyLjc2LDExMi43NiwwLDAsMC0xNC45Myw4LjY0QzUzLjIxLDU0LjI2LDYzLDkwLjg1LDYzLDExMi44M2MwLDIxLjIzLTEwLjE3LDU3Ljg4LTI1Ljc2LDkyLjkxYTExMy42NiwxMTMuNjYsMCwwLDAsMTQuODQsOC43N0M2OC45NCwxNzcuMDUsODAsMTM3LDgwLDExMi44M1oiLz48L2c+PC9nPjwvc3ZnPg0K)](https://www.talos.dev/)

</div>
</div>

## Overview

This repository is my home Kubernetes cluster in a declarative state. [Flux](https://github.com/fluxcd/flux2) watches the [kubernetes](./kubernetes/) folder and will make the changes to the cluster based on the YAML manifests.


### Core Components

- [cilium/cilium](https://github.com/cilium/cilium): Kubernetes CNI.
- [mozilla/sops](https://toolkit.fluxcd.io/guides/mozilla-sops/): Manages secrets for Kubernetes, Ansible and Terraform.
- [kubernetes-sigs/external-dns](https://github.com/kubernetes-sigs/external-dns): Automatically manages DNS records from my cluster in Cloudflare (external) and Bind9 (internal).
- [jetstack/cert-manager](https://cert-manager.io/docs/): Creates SSL certificates for services in my Kubernetes cluster.
- [kubernetes/ingress-nginx](https://github.com/kubernetes/ingress-nginx/): Ingress controller to expose HTTP traffic to pods over DNS.
- [siderolabs/talos](https://www.talos.dev/): The Kubernetes Operating System.
- [democratic-csi](https://github.com/democratic-csi/democratic-csi): Provides block, and localpath

### :robot:&nbsp; Automation

- [Github Actions](https://docs.github.com/en/actions) for checking code formatting and running periodic jobs
- [Renovate](https://github.com/renovatebot/renovate) keeps the application charts and container images up-to-date

### Directories

This Git repository contains the following directories under [kubernetes](./kubernetes/).

```sh
üìÅ kubernetes      # Kubernetes cluster defined as code
‚îú‚îÄüìÅ bootstrap     # Flux installation
‚îú‚îÄüìÅ flux          # Main Flux configuration of repository
‚îî‚îÄüìÅ apps          # Apps deployed into my cluster grouped by namespace
```

## üîß Hardware

My hardware I managed to acquire, sticking to amd64 based machines for now.

| Device                                                | Count | OS Disk Size  | Data Disk Size       | Ram     | Operating System | Purpose           |
|-------------------------------------------------------|-------|---------------|----------------------|---------|------------------|-------------------|
| Intel NUC7i3BNH                                       | 1     | 500GB SSD     | -                    | 16GB    | Talos            | control-plane     |
| Lenovo Thinkcentre M920X                              | 1     | 512GB SSD     | -                    | 32GB    | Talos            | worker            |
---

## ü§ù Graditude and Thanks

Thanks to all the people who donate their time to the [Kubernetes @Home](https://github.com/k8s-at-home/) community.

## üîè License

See [LICENSE](./LICENSE)
